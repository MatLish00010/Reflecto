# Настройка Supabase

## 1. Создание проекта Supabase

1. Перейдите на [database.new](https://database.new)
2. Создайте новый проект Supabase
3. Дождитесь завершения инициализации проекта

## 2. Настройка базы данных

1. В панели управления Supabase перейдите в **SQL Editor**
2. Скопируйте содержимое файла `supabase-setup.sql`
3. Выполните SQL скрипт для создания таблиц и политик RLS

## 3. Получение ключей API

1. В панели управления перейдите в **Settings** → **API**
2. Скопируйте:
   - **Project URL** (например: `https://your-project.supabase.co`)
   - **anon public** ключ

## 4. Настройка переменных окружения

Создайте файл `.env.local` в корне проекта:

```env
NEXT_PUBLIC_SUPABASE_URL=your_project_url_here
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here
```

## 5. Проверка подключения

После настройки вы можете использовать Supabase в своем приложении:

```typescript
// Для серверных компонентов
import { createClient } from '@/lib/supabase/server';

// Для клиентских компонентов
import { supabase } from '@/lib/supabase/client';
```

## Структура таблиц

### Таблица `users`

- `id` - уникальный идентификатор пользователя
- `fingerprint` - уникальный браузерный отпечаток
- `created_at` - дата создания пользователя

### Таблица `notes`

- `id` - уникальный идентификатор записи
- `note` - содержимое записи
- `user_id` - ссылка на пользователя
- `created_at` - дата создания записи

## Политики безопасности (RLS)

Скрипт создает следующие политики:

- Пользователи могут создавать, читать и обновлять свои записи
- Анонимные пользователи могут создавать новых пользователей по fingerprint
- Все операции защищены Row Level Security
